receivers:
  otlp:
    protocols:
      grpc: {}
      http: {}
processors:
  memory_limiter:
    check_interval: 1s
    limit_mib: 200
    spike_limit_mib: 50
  batch: { timeout: 2s }
  attributes:
    actions:
      - key: http.request.header.authorization
        action: delete
      - key: http.response.header.set-cookie
        action: delete
exporters:
  awsemf:
    log_group_name: "/ain/${ENV}/metrics"
    namespace: "AIN/${ENV}"
  awscloudwatchlogs:
    log_group_name: "/ain/${ENV}/traces"
    log_stream_name: "collector"
    request_timeout_seconds: 10
  logging: { loglevel: warn }
service:
  telemetry:
    logs: { level: "info" }
  pipelines:
    metrics:
      receivers: [otlp]
      processors: [memory_limiter, batch]
      exporters: [awsemf]
    logs:
      receivers: [otlp]
      processors: [memory_limiter, batch, attributes]
      exporters: [awscloudwatchlogs]
    traces:
      receivers: [otlp]
      processors: [memory_limiter, batch]
      exporters: [awscloudwatchlogs]
