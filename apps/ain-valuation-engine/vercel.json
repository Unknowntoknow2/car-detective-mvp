{
  "version": 2,

  // Run all Python serverless functions with Python 3.11
  "functions": {
    "api/**/*.py": { "runtime": "python3.11", "memory": 1024, "maxDuration": 10 }
  },

  // Build your Vite SPA; output goes to "dist"
  "buildCommand": "npm ci --legacy-peer-deps && npm run build",
  "outputDirectory": "dist",

  // Route /api/* to Python; everything else to the SPA
  "routes": [
    { "src": "^/api/ping$", "dest": "/api/ping.py" },
    { "src": "^/api(?:/.*)?$", "dest": "/api/app.py" },
    { "handle": "filesystem" },
    { "src": "/(.*)", "dest": "/index.html" }
  ]
}
